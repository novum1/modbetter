---
// Last updated: 2026-02-05 01:15:00
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import Nav from "../../components/Nav.astro";

const posts = await getCollection("blog");

// Sort by date, newest first
const sortedPosts = posts.sort(
  (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime()
);
---

<BaseLayout
  title="Articles"
  description="Guides and resources for shipping container conversions. Garages, offices, coffee shops, restaurants, and more."
>
  <Nav />
  <main>
    <h1>All Articles</h1>
    <p class="intro">
      {posts.length} guides on container garages, offices, coffee shops, restaurants, and more.
    </p>

    <ul class="post-list">
      {sortedPosts.map((post) => (
        <li>
          <a href={`/blog/${post.data.slug}/`}>
            <h2>{post.data.title}</h2>
            <p>{post.data.description.slice(0, 150)}...</p>
            <time datetime={post.data.pubDate.toISOString()}>
              {post.data.pubDate.toLocaleDateString("en-US", {
                year: "numeric",
                month: "short",
                day: "numeric",
              })}
            </time>
          </a>
        </li>
      ))}
    </ul>
  </main>
</BaseLayout>

<style>
  main {
    max-width: 800px;
    margin: 0 auto;
    padding: 0 1rem 4rem;
  }

  h1 {
    margin-bottom: 0.5rem;
  }

  .intro {
    color: #666;
    margin-bottom: 2rem;
  }

  .post-list {
    list-style: none;
    padding: 0;
  }

  .post-list li {
    border-bottom: 1px solid #eee;
  }

  .post-list a {
    display: block;
    padding: 1.5rem 0;
    text-decoration: none;
    color: inherit;
  }

  .post-list a:hover h2 {
    color: #0066cc;
  }

  .post-list h2 {
    font-size: 1.25rem;
    margin-bottom: 0.5rem;
    line-height: 1.3;
    transition: color 0.2s;
  }

  .post-list p {
    color: #666;
    line-height: 1.5;
    margin-bottom: 0.5rem;
  }

  .post-list time {
    font-size: 0.875rem;
    color: #999;
  }
</style>
